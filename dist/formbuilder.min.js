!function(){"use strict";var e=function(){var e=this;return this.defaultConfig={},this.elements={},this.ElementMock=function(t){if(void 0===t)throw"Config for element must be set";var n=this;return this.id="_"+Math.random().toString(36).substr(2,6),this.name=t.name,this.form=t.form,this.placeholder=t.placeholder,this.value=t.value,this.label=t.label,this.disabled=t.disabled||!1,this.error=t.error||null,this.type=t.type,this.displayError=function(){if(null!==n.error&&void 0!==n.error){var e=document.createElement("span");e.className="error",e.innerHTML=n.error,n.html.appendChild(e)}},this.getDefaultElementClass=function(n){return e.defaultConfig&&e.defaultConfig.elements&&e.defaultConfig.elements[t.type]&&e.defaultConfig.elements[t.type][n]?e.defaultConfig.elements[t.type][n]:""},this.setDefaultClass=function(){n.wrapClass=t.wrap_class||n.getDefaultElementClass("wrap_class"),n.elementClass=t.element_class||n.getDefaultElementClass("element_class"),n.labelClass=t.label_class||n.getDefaultElementClass("label_class")},this.init=function(){n.setDefaultClass()}(),this},this.getForm=function(t){return e.configIsValid(t)?new e.Form(t.elements,t.form):void 0},this.configIsValid=function(e){if(void 0===e)throw"Config must be set";if(void 0===e.elements)throw"Elements must be set";return!0},this.register=function(t,n){void 0===e.elements[t]&&(e.elements[t]=n)},this.deRegister=function(t){void 0!==e.elements[t]&&delete e.elements[t]},this.setFormClass=function(t){e.Form=t},this.getFormClass=function(){return e.Form},this.setDefaultConfig=function(t){t&&(e.defaultConfig=t)},this.getDefaultConfig=function(){return e.defaultConfig},{getForm:this.getForm,register:this.register,deRegister:this.deRegister,ElementMock:this.ElementMock,setFormClass:this.setFormClass,getFormClass:this.getFormClass,elements:this.elements,setDefaultConfig:this.setDefaultConfig,getDefaultConfig:this.getDefaultConfig}};window.FormBuilder=new e}(),function(){"use strict";var e=function(e,t){var n=this;return this.id=1,this.name=t.name||"form-"+this.id,this.config=t||{},this.formClass=t.form_class||"",this.method=t.method||"POST",this.errors={},this.listeners={submit:[],validate:[]},this.on=function(e,t){n.listeners[e]&&n.listeners[e].push(t)},this.dispatch=function(e,t){if("string"!=typeof arguments[0])throw"Invalid event name";var s,l=n.listeners[arguments[0]],r=[];if(Array.prototype.push.apply(r,arguments),r.shift(),l)for(s in l)l[s].apply(null,r)},this.submit=function(){var e,t,s,l={};for(e in n.elements)s=n.elements[e],"function"==typeof s.getData&&(t=s.getData(),null!==t&&(l[e]=t));n.dispatch("validate",l,n),0===Object.keys(n.errors).length?n.listeners.submit.length>0?n.dispatch("submit",l):n.html.submit():n.displayErrors()},this.displayErrors=function(){var e,t,s=n.errors;for(e in s)t=n.elements[e],void 0!==t&&(t.error=s[e],t.displayError())},this.addError=function(e,t){void 0===n.errors[e]&&(n.errors[e]={}),n.errors[e]=t},this.computeElements=function(){var s,l,r;n.elements={};for(s in e)l=e[s],r=FormBuilder.elements[l.type],void 0!==r&&(l.name=s,l.form=n,n.elements[s]=new r(l));n.elements.submit=new FormBuilder.elements.submit({form:n,elementClass:t.submit_class})},this.trigger=function(e,t){n.listeners[e]&&"function"==typeof n[e]&&n[e](t)},this.renderElements=function(e){var t,s,l,r;for(t in n.elements)s=n.elements[t],l=document.createElement("div"),l.className="element_"+t+" "+s.wrapClass,r=s.render(l),void 0!==r&&l.appendChild(r),s.html=l,"submit"!==t&&s.displayError(),e.appendChild(l)},this.render=function(e){if(!e)throw"An DOM node must be passed to render function arguments";var t=document.createElement("form");return n.formClass&&(t.className=n.formClass),t.method=n.method,t.id="form_"+n.id,n.renderElements(t),n.html=t,e.appendChild(t)},this.init=function(){n.computeElements()}(),{id:this.id,name:this.name,elements:this.elements,method:this.method,render:this.render,on:this.on}};FormBuilder.setFormClass(e)}(),function(){"use strict";FormBuilder.register("checkbox",function(e){var t={};return t=new FormBuilder.ElementMock(e),t.isScalar=!1,/number|string/.test(typeof e.options)?(t.options=[e.options],t.isScalar=!0):"object"==typeof e.options?t.options=e.options:t.options=[],/number|string/.test(typeof e.checked)?t.checked=[e.checked]:"object"==typeof e.checked?t.checked=e.checked:t.checked=[],t.render=function(n){var s,l,r,i,a;t.options.length>1&&(t.name=t.name+"[]");for(s in t.options)l=t.options[s],r=document.createElement("div"),i=document.createElement("input"),a=document.createElement("label"),e.sub_wrap_class&&(r.className=e.sub_wrap_class),t.labelClass&&(a.className=t.labelClass),i.type="checkbox",i.name=t.name,i.value=s,-1!==t.checked.indexOf(s)&&(i.checked="checked"),a.appendChild(i),a.innerHTML=a.innerHTML+" "+l,r.appendChild(a),n.appendChild(r)},t.getData=function(){var e,n,s=t.html.getElementsByTagName("input"),l=[];for(e=0;e<s.length;e++)if(n=s[e],!0===n.checked){if(!0===t.isScalar)return n.value;l.push(n.value)}return l.length>0?l:null},t})}(),function(){"use strict";FormBuilder.register("hidden",function(e){var t={};return t=new FormBuilder.ElementMock(e),t.render=function(){var e=document.createElement("input");return e.type="hidden",e.name=t.name,void 0!==t.value&&null!==t.value&&(e.value=t.value),e},t.getData=function(){return t.html.getElementsByTagName("input")[0].value},t})}(),function(){"use strict";FormBuilder.register("radio",function(e){var t={};return t=new FormBuilder.ElementMock(e),/number|string/.test(typeof e.options)?t.options=[e.options]:"object"==typeof e.options?t.options=e.options:t.options=[],/number|string/.test(typeof e.checked)?t.checked=[e.checked]:"object"==typeof e.checked?t.checked=e.checked:t.checked=[],t.render=function(n){var s,l,r,i,a;for(s in t.options)l=t.options[s],r=document.createElement("div"),i=document.createElement("input"),a=document.createElement("label"),e.sub_wrap_class&&(r.className=e.sub_wrap_class),t.labelClass&&(a.className=t.labelClass),i.type="radio",i.name=t.name,i.value=s,-1!==t.checked.indexOf(s)&&(i.checked="checked"),a.appendChild(i),a.innerHTML=a.innerHTML+" "+l,r.appendChild(a),n.appendChild(r)},t.getData=function(){var e,n,s=t.html.getElementsByTagName("input");for(e=0;e<s.length;e++)if(n=s[e],!0===n.checked)return n.value;return null},t})}(),function(){"use strict";FormBuilder.register("select",function(e){var t={};return t=new FormBuilder.ElementMock(e),t.options="object"==typeof e.options?e.options:[],t.multiple=e.multiple||!1,/number|string/.test(typeof e.selected)?t.selected=[e.selected]:"object"==typeof e.selected?t.selected=e.selected:t.selected=[],t.render=function(e){var n,s=document.createElement("select");if(s.name=t.name,s.disabled=t.disabled,t.label){var l=document.createElement("label");t.labelClass&&(l.className=t.labelClass),l.innerHTML=t.label,e.appendChild(l)}!0===t.multiple&&(s.multiple=!0,s.name=s.name+"[]"),t.elementClass&&(s.className=t.elementClass);for(n in t.options){var r=document.createElement("option");r.value=n,r.text=t.options[n],-1!==t.selected.indexOf(n)&&(r.selected=!0),s.add(r)}return s},t.getData=function(){var e,n,s=t.html.getElementsByTagName("option"),l=[];for(e=0;e<s.length;e++)if(n=s[e],!0===n.selected){if(!0!==t.multiple)return n.value;l.push(n.value)}return l.length>0?l:null},t})}(),function(){"use strict";FormBuilder.register("submit",function(e){var t=this;this.form=e.form,this.elementClass=e.elementClass,this.render=function(){var e=document.createElement("input");return e.type="submit",e.value="Submit",t.elementClass&&(e.className=t.elementClass),e.onclick=function(){return t.form.trigger("submit"),!1},e}})}(),function(){"use strict";FormBuilder.register("text",function(e){var t={};return t=new FormBuilder.ElementMock(e),t.render=function(e){var n=document.createElement("input");if(n.type="text",n.name=t.name,n.disabled=t.disabled,void 0!==t.placeholder&&(n.placeholder=t.placeholder),void 0!==t.value&&null!==t.value&&(n.value=t.value),t.elementClass&&(n.className=t.elementClass),t.label){var s=document.createElement("label");t.labelClass&&(s.className=t.labelClass),s.innerHTML=t.label,e.appendChild(s)}return n},t.getData=function(){return t.html.getElementsByTagName("input")[0].value},t})}(),function(){"use strict";FormBuilder.register("textarea",function(e){var t={};return t=new FormBuilder.ElementMock(e),t.render=function(n){var s=document.createElement("textarea");if(s.name=t.name,s.disabled=t.disabled,s.cols=e.cols||20,s.rows=e.rows||2,void 0!==t.placeholder&&(s.placeholder=t.placeholder),t.label){var l=document.createElement("label");t.labelClass&&(l.className=t.labelClass),l.innerHTML=t.label,n.appendChild(l)}return void 0!==t.value&&null!==t.value&&(s.value=t.value),t.elementClass&&(s.className=t.elementClass),s},t.getData=function(){return t.html.getElementsByTagName("textarea")[0].value},t})}();