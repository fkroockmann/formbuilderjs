!function(){"use strict";var e=function(){var e=this;return this.elements={},this.ElementMock=function(e){var t=this;return this.id=1,this.name=e.name,this.form=e.form,this.placeholder=e.placeholder,this.value=e.value,this.label=e.label,this.disabled=e.disabled||!1,this.error=e.error||null,this.type=e.type,this.displayError=function(){if(null!==t.error&&void 0!==t.error){var e=document.createElement("span");e.className="error",e.innerHTML=t.error,t.html.appendChild(e)}},this},this.getForm=function(t){return e.configIsValid(t)?new e.Form(t.elements,t.form):void 0},this.configIsValid=function(e){if(void 0===e)throw"config must be set";if(void 0===e.elements)throw"elements must be set";return!0},this.register=function(t,n){void 0===e.elements[t]&&(e.elements[t]=n)},this.setForm=function(t){e.Form=t},{getForm:this.getForm,register:this.register,ElementMock:this.ElementMock,setForm:this.setForm,elements:this.elements}};window.FormBuilder=new e}(),function(){"use strict";var e=function(e,t){var n=this;return this.id=1,this.name=t.name||"form-"+this.id,this.config=t||{},this["class"]=t["class"]||[],this.method=t.method||"POST",this.errors={},this.listeners={submit:[],validate:[]},this.on=function(e,t){n.listeners[e]&&n.listeners[e].push(t)},this.dispatch=function(e,t){if("string"!=typeof arguments[0])throw"Invalid event name";var r,i=n.listeners[arguments[0]],o=[];if(Array.prototype.push.apply(o,arguments),o.shift(),i)for(r in i)i[r].apply(null,o)},this.submit=function(){var e,t,r,i={};for(e in n.elements)r=n.elements[e],"function"==typeof r.getData&&(t=r.getData(),null!==t&&(i[e]=t));n.dispatch("validate",i,n),0===Object.keys(n.errors).length?n.listeners.submit.length>0?n.dispatch("submit",i):n.html.submit():n.displayErrors()},this.displayErrors=function(){var e,t,r=n.errors;for(e in r)t=n.elements[e],void 0!==t&&(t.error=r[e],t.displayError())},this.addError=function(e,t){void 0===n.errors[e]&&(n.errors[e]={}),n.errors[e]=t},this.computeElements=function(){var t,r,i;n.elements={};for(t in e)r=e[t],i=FormBuilder.elements[r.type],void 0!==i&&(r.name=t,r.form=n,n.elements[t]=new i(r));n.elements.submit=new FormBuilder.elements.submit({form:n})},this.trigger=function(e,t){n.listeners[e]&&"function"==typeof n[e]&&n[e](t)},this.renderElements=function(e){var t,r,i,o;for(t in n.elements){if(r=n.elements[t],i=document.createElement("div"),i.className="element_"+t,o=r.render(i),void 0!==r.label&&null!==r.label){var s=document.createElement("label");s.innerHTML=r.label,i.appendChild(s)}void 0!==o&&i.appendChild(o),r.html=i,"submit"!==t&&r.displayError(),e.appendChild(i)}},this.render=function(e){if(!e)throw"An DOM node must be passed to render function arguments";var t=document.createElement("form");return n["class"].length>0&&(t.className=n["class"].join(" ")),t.method=n.method,t.id="form_"+n.id,n.renderElements(t),n.html=t,e.appendChild(t)},this.init=function(){n.computeElements()}(),{id:this.id,name:this.name,elements:this.elements,method:this.method,render:this.render,on:this.on}};FormBuilder.setForm(e)}(),function(){"use strict";FormBuilder.register("checkbox",function(e){var t={};return t=new FormBuilder.ElementMock(e),t.isScalar=!1,/number|string/.test(typeof e.options)?(t.options=[e.options],t.isScalar=!0):"object"==typeof e.options?t.options=e.options:t.options=[],/number|string/.test(typeof e.checked)?t.checked=[e.checked]:"object"==typeof e.checked?t.checked=e.checked:t.checked=[],t.render=function(e){var n,r,i,o;t.options.length>1&&(t.name=t.name+"[]");for(n in t.options)r=t.options[n],i=document.createElement("input"),o=document.createElement("span"),i.type="checkbox",i.name=t.name,i.value=n,-1!==t.checked.indexOf(n)&&(i.checked="checked"),o.innerHTML=r,e.appendChild(i),e.appendChild(o)},t.getData=function(){var e,n,r=t.html.getElementsByTagName("input"),i=[];for(e=0;e<r.length;e++)if(n=r[e],!0===n.checked){if(!0===t.isScalar)return n.value;i.push(n.value)}return i.length>0?i:null},t})}(),function(){"use strict";FormBuilder.register("hidden",function(e){var t={};return t=new FormBuilder.ElementMock(e),t.render=function(){var e=document.createElement("input");return e.type="hidden",e.name=t.name,void 0!==t.value&&null!==t.value&&(e.value=t.value),e},t.getData=function(){return t.html.getElementsByTagName("input")[0].value},t})}(),function(){"use strict";FormBuilder.register("radio",function(e){var t={};return t=new FormBuilder.ElementMock(e),/number|string/.test(typeof e.options)?t.options=[e.options]:"object"==typeof e.options?t.options=e.options:t.options=[],/number|string/.test(typeof e.checked)?t.checked=[e.checked]:"object"==typeof e.checked?t.checked=e.checked:t.checked=[],t.render=function(e){var n,r,i,o;for(n in t.options)r=t.options[n],i=document.createElement("input"),o=document.createElement("span"),i.type="radio",i.name=t.name,i.value=n,-1!==t.checked.indexOf(n)&&(i.checked="checked"),o.innerHTML=r,e.appendChild(i),e.appendChild(o)},t.getData=function(){var e,n,r=t.html.getElementsByTagName("input");for(e=0;e<r.length;e++)if(n=r[e],!0===n.checked)return n.value;return null},t})}(),function(){"use strict";FormBuilder.register("select",function(e){var t={};return t=new FormBuilder.ElementMock(e),t.options="object"==typeof e.options?e.options:[],t.multiple=e.multiple||!1,/number|string/.test(typeof e.selected)?t.selected=[e.selected]:"object"==typeof e.selected?t.selected=e.selected:t.selected=[],t.render=function(){var e,n=document.createElement("select");n.name=t.name,n.disabled=t.disabled,!0===t.multiple&&(n.multiple=!0,n.name=n.name+"[]");for(e in t.options){var r=document.createElement("option");r.value=e,r.text=t.options[e],-1!==t.selected.indexOf(e)&&(r.selected=!0),n.add(r)}return n},t.getData=function(){var e,n,r=t.html.getElementsByTagName("option"),i=[];for(e=0;e<r.length;e++)if(n=r[e],!0===n.selected){if(!0!==t.multiple)return n.value;i.push(n.value)}return i.length>0?i:null},t})}(),function(){"use strict";FormBuilder.register("submit",function(e){var t=this;this.form=e.form,this.render=function(){var e=document.createElement("input");return e.type="submit",e.value="Submit",e.onclick=function(){return t.form.trigger("submit"),!1},e}})}(),function(){"use strict";FormBuilder.register("text",function(e){var t={};return t=new FormBuilder.ElementMock(e),t.render=function(){var e=document.createElement("input");return e.type="text",e.name=t.name,e.disabled=t.disabled,void 0!==t.placeholder&&(e.placeholder=t.placeholder),void 0!==t.value&&null!==t.value&&(e.value=t.value),e},t.getData=function(){return t.html.getElementsByTagName("input")[0].value},t})}(),function(){"use strict";FormBuilder.register("textarea",function(e){var t={};return t=new FormBuilder.ElementMock(e),t.render=function(){var n=document.createElement("textarea");return n.name=t.name,n.disabled=t.disabled,n.cols=e.cols||20,n.rows=e.rows||2,void 0!==t.placeholder&&(n.placeholder=t.placeholder),void 0!==t.value&&null!==t.value&&(n.value=t.value),n},t.getData=function(){return t.html.getElementsByTagName("textarea")[0].value},t})}();