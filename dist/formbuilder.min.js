!function(){"use strict";var e=function(){var e=this;return this.elements={},this.ElementMock=function(e){return this.id=1,this.name=e.name,this.form=e.form,this.placeholder=e.placeholder,this.value=e.value,this.label=e.label,this.disabled=e.disabled||!1,this.error=e.error||null,this.type=e.type,this},this.getForm=function(t){return e.configIsValid(t)?new e.Form(t.elements,t.form):void 0},this.configIsValid=function(e){if(void 0===e)throw"config must be set";if(void 0===e.elements)throw"elements must be set";return!0},this.register=function(t,n){void 0===e.elements[t]&&(e.elements[t]=n)},this.setForm=function(t){e.Form=t},{getForm:this.getForm,register:this.register,ElementMock:this.ElementMock,setForm:this.setForm,elements:this.elements}};window.FormBuilder=new e}(),function(){"use strict";var e=function(e,t){var n=this;return this.id=1,this.name=t.name||"form-"+this.id,this.config=t||{},this["class"]=t["class"]||[],this.method=t.method||"POST",this.listeners={submit:[]},this.on=function(e,t){n.listeners[e]&&n.listeners[e].push(t)},this.dispatch=function(e,t){var i,r=n.listeners[e];if(r)for(i in r)r[i](t)},this.submit=function(){var e,t,i,r={};for(e in n.elements)i=n.elements[e],"function"==typeof i.getData&&(t=i.getData(),null!==t&&(r[e]=t));this.dispatch("submit",r)},this.computeElements=function(){var t,i,r;n.elements={};for(t in e)i=e[t],r=FormBuilder.elements[i.type],void 0!==r&&(i.name=t,i.form=n,n.elements[t]=new r(i));n.elements.submit=new FormBuilder.elements.submit({form:n})},this.trigger=function(e,t){n.listeners[e]&&"function"==typeof n[e]&&n[e](t)},this.renderElements=function(e){var t,i,r,o;for(t in n.elements){if(i=n.elements[t],r=document.createElement("div"),r.className="element_"+t,o=i.render(r),void 0!==i.label&&null!==i.label){var s=document.createElement("label");s.innerHTML=i.label,r.appendChild(s)}void 0!==o&&r.appendChild(o),i.html=r,e.appendChild(r)}},this.render=function(){var e=document.createElement("form");return n["class"].length>0&&(e.className=n["class"].join(" ")),e.method=n.method,e.id="form_"+n.id,n.renderElements(e),n.html=e,e},this.init=function(){n.computeElements()}(),{id:this.id,name:this.name,elements:this.elements,method:this.method,render:this.render,on:this.on}};FormBuilder.setForm(e)}(),function(){"use strict";FormBuilder.register("checkbox",function(e){var t={};return t=new FormBuilder.ElementMock(e),t.isScalar=!1,/number|string/.test(typeof e.options)?(t.options=[e.options],t.isScalar=!0):"object"==typeof e.options?t.options=e.options:t.options=[],/number|string/.test(typeof e.checked)?t.checked=[e.checked]:"object"==typeof e.checked?t.checked=e.checked:t.checked=[],t.render=function(e){var n,i,r,o;t.options.length>1&&(t.name=t.name+"[]");for(n in t.options)i=t.options[n],r=document.createElement("input"),o=document.createElement("span"),r.type="checkbox",r.name=t.name,r.value=n,-1!==t.checked.indexOf(n)&&(r.checked="checked"),o.innerHTML=i,e.appendChild(r),e.appendChild(o)},t.getData=function(){var e,n,i=t.html.getElementsByTagName("input"),r=[];for(e=0;e<i.length;e++)if(n=i[e],!0===n.checked){if(!0===t.isScalar)return n.value;r.push(n.value)}return r.length>0?r:null},t})}(),function(){"use strict";FormBuilder.register("hidden",function(e){var t={};return t=new FormBuilder.ElementMock(e),t.render=function(){var e=document.createElement("input");return e.type="hidden",e.name=t.name,void 0!==t.value&&null!==t.value&&(e.value=t.value),e},t.getData=function(){return t.html.getElementsByTagName("input")[0].value},t})}(),function(){"use strict";FormBuilder.register("radio",function(e){var t={};return t=new FormBuilder.ElementMock(e),/number|string/.test(typeof e.options)?t.options=[e.options]:"object"==typeof e.options?t.options=e.options:t.options=[],/number|string/.test(typeof e.checked)?t.checked=[e.checked]:"object"==typeof e.checked?t.checked=e.checked:t.checked=[],t.render=function(e){var n,i,r,o;for(n in t.options)i=t.options[n],r=document.createElement("input"),o=document.createElement("span"),r.type="radio",r.name=t.name,r.value=n,-1!==t.checked.indexOf(n)&&(r.checked="checked"),o.innerHTML=i,e.appendChild(r),e.appendChild(o)},t.getData=function(){var e,n,i=t.html.getElementsByTagName("input");for(e=0;e<i.length;e++)if(n=i[e],!0===n.checked)return n.value;return null},t})}(),function(){"use strict";FormBuilder.register("select",function(e){var t={};return t=new FormBuilder.ElementMock(e),t.options="object"==typeof e.options?e.options:[],t.multiple=e.multiple||!1,/number|string/.test(typeof e.selected)?t.selected=[e.selected]:"object"==typeof e.selected?t.selected=e.selected:t.selected=[],t.render=function(){var e,n=document.createElement("select");n.name=t.name,n.disabled=t.disabled,!0===t.multiple&&(n.multiple=!0,n.name=n.name+"[]");for(e in t.options){var i=document.createElement("option");i.value=e,i.text=t.options[e],-1!==t.selected.indexOf(e)&&(i.selected=!0),n.add(i)}return n},t.getData=function(){var e,n,i=t.html.getElementsByTagName("option"),r=[];for(e=0;e<i.length;e++)if(n=i[e],!0===n.selected){if(!0!==t.multiple)return n.value;r.push(n.value)}return r.length>0?r:null},t})}(),function(){"use strict";FormBuilder.register("submit",function(e){var t=this;this.form=e.form,this.render=function(){var e=document.createElement("input");return e.type="submit",e.value="Submit",e.onclick=function(){return t.form.trigger("submit"),!1},e}})}(),function(){"use strict";FormBuilder.register("text",function(e){var t={};return t=new FormBuilder.ElementMock(e),t.render=function(){var e=document.createElement("input");return e.type="text",e.name=t.name,e.disabled=t.disabled,void 0!==t.placeholder&&(e.placeholder=t.placeholder),void 0!==t.value&&null!==t.value&&(e.value=t.value),e},t.getData=function(){return t.html.getElementsByTagName("input")[0].value},t})}(),function(){"use strict";FormBuilder.register("textarea",function(e){var t={};return t=new FormBuilder.ElementMock(e),t.render=function(){var n=document.createElement("textarea");return n.name=t.name,n.disabled=t.disabled,n.cols=e.cols||20,n.rows=e.rows||2,void 0!==t.placeholder&&(n.placeholder=t.placeholder),void 0!==t.value&&null!==t.value&&(n.value=t.value),n},t.getData=function(){return t.html.getElementsByTagName("textarea")[0].value},t})}();